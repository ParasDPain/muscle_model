<Lems>


<!-- Specify which component to run -->
<Target component="sim1"/>

<!-- Include core NeuroML2 ComponentType definitions -->
<Include file="Cells.xml"/>
<Include file="Networks.xml"/>
<Include file="Simulation.xml"/>

<Include file="Leak.nml"/>
<Include file="k_slow.nml"/>
<Include file="k_fast.nml"/>
<Include file="ca_boyle.nml"/>
<Include file="SingleCompMuscleCell.nml"/>


<voltageClamp id="vClamp1" delay="5ms" duration="20ms" targetVoltage="-60mV" seriesResistance="1ohm"/>
<voltageClamp id="vClamp2" delay="5ms" duration="20ms" targetVoltage="-50mV" seriesResistance="1ohm"/>
<voltageClamp id="vClamp3" delay="5ms" duration="20ms" targetVoltage="-40mV" seriesResistance="1ohm"/>
<voltageClamp id="vClamp4" delay="5ms" duration="20ms" targetVoltage="-30mV" seriesResistance="1ohm"/>
<voltageClamp id="vClamp5" delay="5ms" duration="20ms" targetVoltage="-20mV" seriesResistance="1ohm"/>
<voltageClamp id="vClamp6" delay="5ms" duration="20ms" targetVoltage="-10mV" seriesResistance="1ohm"/>
<voltageClamp id="vClamp7" delay="5ms" duration="20ms" targetVoltage="0mV" seriesResistance="1ohm"/>
<voltageClamp id="vClamp8" delay="5ms" duration="20ms" targetVoltage="10mV" seriesResistance="1ohm"/>
<voltageClamp id="vClamp9" delay="5ms" duration="20ms" targetVoltage="20mV" seriesResistance="1ohm"/>
<voltageClamp id="vClamp10" delay="5ms" duration="20ms" targetVoltage="30mV" seriesResistance="1ohm"/>
<voltageClamp id="vClamp11" delay="5ms" duration="20ms" targetVoltage="40mV" seriesResistance="1ohm"/>

<pulseGenerator id="offsetToMin70" delay="0ms" duration="1000ms" amplitude="-120 pA" />

<network id="net1">
    <population id="mc1" component="SingleCompMuscleCell" size="1"/>
    <population id="mc2" component="SingleCompMuscleCell" size="1"/>
    <population id="mc3" component="SingleCompMuscleCell" size="1"/>
    <population id="mc4" component="SingleCompMuscleCell" size="1"/>
    <population id="mc5" component="SingleCompMuscleCell" size="1"/>
    <population id="mc6" component="SingleCompMuscleCell" size="1"/>
    <population id="mc7" component="SingleCompMuscleCell" size="1"/>
    <population id="mc8" component="SingleCompMuscleCell" size="1"/>
    <population id="mc9" component="SingleCompMuscleCell" size="1"/>
    <population id="mc10" component="SingleCompMuscleCell" size="1"/>
    <population id="mc11" component="SingleCompMuscleCell" size="1"/>


    <explicitInput target="mc1[0]" input="offsetToMin70"/>
    <explicitInput target="mc2[0]" input="offsetToMin70"/>
    <explicitInput target="mc3[0]" input="offsetToMin70"/>
    <explicitInput target="mc4[0]" input="offsetToMin70"/>
    <explicitInput target="mc5[0]" input="offsetToMin70"/>
    <explicitInput target="mc6[0]" input="offsetToMin70"/>
    <explicitInput target="mc7[0]" input="offsetToMin70"/>
    <explicitInput target="mc8[0]" input="offsetToMin70"/>
    <explicitInput target="mc9[0]" input="offsetToMin70"/>
    <explicitInput target="mc10[0]" input="offsetToMin70"/>
    <explicitInput target="mc11[0]" input="offsetToMin70"/>


    <explicitInput target="mc1[0]" input="vClamp1"/>
    <explicitInput target="mc2[0]" input="vClamp2"/>
    <explicitInput target="mc3[0]" input="vClamp3"/>
    <explicitInput target="mc4[0]" input="vClamp4"/>
    <explicitInput target="mc5[0]" input="vClamp5"/>
    <explicitInput target="mc6[0]" input="vClamp6"/>
    <explicitInput target="mc7[0]" input="vClamp7"/>
    <explicitInput target="mc8[0]" input="vClamp8"/>
    <explicitInput target="mc9[0]" input="vClamp9"/>
    <explicitInput target="mc10[0]" input="vClamp10"/>
    <explicitInput target="mc11[0]" input="vClamp11"/>
</network>



<Simulation id="sim1" length="30ms" step="0.0025ms" target="net1">

    <Display id="d1" title="Voltage responses to VClamps"  timeScale="1ms" xmin="-2" xmax="32" ymin="-80" ymax="10">
        <Line id="l1" quantity="mc1[0]/v" scale="1mV"  color="#ffffff" timeScale="1ms"/>
        <Line id="l2" quantity="mc2[0]/v" scale="1mV"  color="#ffffdd" timeScale="1ms"/>
        <Line id="l3" quantity="mc3[0]/v" scale="1mV"  color="#ffffff" timeScale="1ms"/>
        <Line id="l4" quantity="mc4[0]/v" scale="1mV"  color="#ffddbb" timeScale="1ms"/>
        <Line id="l5" quantity="mc5[0]/v" scale="1mV"  color="#ffbbbb" timeScale="1ms"/>
        <Line id="l6" quantity="mc6[0]/v" scale="1mV"  color="#ddffff" timeScale="1ms"/>
        <Line id="l7" quantity="mc7[0]/v" scale="1mV"  color="#bbffff" timeScale="1ms"/>
    </Display>


    <Display id="d2" title="Currents through voltage clamps" timeScale="1ms" xmin="-2" xmax="32" ymin="-1" ymax="5">

        <Line id="li1" quantity="mc1[0]/vClamp1/i" scale="1nA"  color="#111fff" timeScale="1ms"/>
        <Line id="li2" quantity="mc2[0]/vClamp2/i" scale="1nA"  color="#222fff" timeScale="1ms"/>
        <Line id="li3" quantity="mc3[0]/vClamp3/i" scale="1nA"  color="#333fff" timeScale="1ms"/>
        <Line id="li4" quantity="mc4[0]/vClamp4/i" scale="1nA"  color="#444fff" timeScale="1ms"/>
        <Line id="li5" quantity="mc5[0]/vClamp5/i" scale="1nA"  color="#555fff"  timeScale="1ms"/>
        <Line id="li6" quantity="mc6[0]/vClamp6/i" scale="1nA"  color="#666fff"  timeScale="1ms"/>
        <Line id="li7" quantity="mc7[0]/vClamp7/i" scale="1nA"  color="#777fff"  timeScale="1ms"/>
        <Line id="li8" quantity="mc8[0]/vClamp8/i" scale="1nA"  color="#888fff"  timeScale="1ms"/>
        <Line id="li9" quantity="mc9[0]/vClamp9/i" scale="1nA"  color="#999fff"  timeScale="1ms"/>
        <Line id="li10" quantity="mc10[0]/vClamp10/i" scale="1nA"  color="#aaafff"  timeScale="1ms"/>
        <Line id="li11" quantity="mc11[0]/vClamp11/i" scale="1nA"  color="#bbbfff"  timeScale="1ms"/>

    </Display>
  
    <Display id="d3" title="Rate variables at 700 pA" timeScale="1ms" xmin="-2" xmax="32" ymin="-0.1" ymax="1.1">

        <Line id="l1" quantity="mc7[0]/biophys/membraneProperties/k_slow_all/k_slow/n/q" scale="1"  color="#000000" timeScale="1ms"/>
        <Line id="l2" quantity="mc7[0]/biophys/membraneProperties/k_fast_all/k_fast/p/q" scale="1"  color="#0000ff"  timeScale="1ms"/>
        <Line id="l3" quantity="mc7[0]/biophys/membraneProperties/k_fast_all/k_fast/q/q" scale="1"  color="#00ffff"  timeScale="1ms"/>
        <Line id="l4" quantity="mc7[0]/biophys/membraneProperties/ca_boyle_all/ca_boyle/e/q" scale="1"  color="#ff00ff"  timeScale="1ms"/>
        <Line id="l5" quantity="mc7[0]/biophys/membraneProperties/ca_boyle_all/ca_boyle/f/q" scale="1"  color="#ffff00"  timeScale="1ms"/>
    </Display>
   

    <Display id="d4" title="Current densities at 700 pA" timeScale="1ms" xmin="-2" xmax="32" ymin="-700" ymax="200">
        <Line id="li0" quantity="mc7[0]/biophys/membraneProperties/Leak_all/iDensity" scale="1uA_per_cm2"  color="#550000"  timeScale="1ms"/>
        <Line id="li1" quantity="mc7[0]/biophys/membraneProperties/k_slow_all/iDensity" scale="1uA_per_cm2"  color="#005500"  timeScale="1ms"/>
        <Line id="li2" quantity="mc7[0]/biophys/membraneProperties/k_fast_all/iDensity" scale="1uA_per_cm2"  color="#000055"  timeScale="1ms"/>
        <Line id="li3" quantity="mc7[0]/biophys/membraneProperties/ca_boyle_all/iDensity" scale="1uA_per_cm2"  color="#fff555"  timeScale="1ms"/>
       
    </Display>

</Simulation>


</Lems>